!function(A){A.fn.selectOrDie=function(E){var C,F,H={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:A.noop},B={},D=!1,G={initSoD:function(J){return B=A.extend({},H,J),this.each(function(){if(A(this).parent().hasClass("sod_select")){console.log("Select or Die: It looks like the SoD already exists");
}else{var N,j,O,S=A(this),W=S.data("custom-id")?S.data("custom-id"):B.customID,T=S.data("custom-class")?S.data("custom-class"):B.customClass,Q=S.data("prefix")?S.data("prefix"):B.prefix,d=S.data("placeholder")?S.data("placeholder"):B.placeholder,R=S.data("placeholder-option")?S.data("placeholder-option"):B.placeholderOption,X=S.data("cycle")?S.data("cycle"):B.cycle,M=S.data("links")?S.data("links"):B.links,Z=S.data("links-external")?S.data("links-external"):B.linksExternal,e=parseInt(S.data("size"))?S.data("size"):B.size,P=parseInt(S.data("tabindex"))?S.data("tabindex"):B.tabIndex?B.tabIndex:S.attr("tabindex")?S.attr("tabindex"):B.tabIndex,L=S.data("strip-empty")?S.data("strip-empty"):B.stripEmpty,Y=S.prop("title")?S.prop("title"):null,U=S.is(":disabled")?" disabled":"",l="",K="",V=0;
Q&&(l='<span class="sod_prefix">'+Q+"</span> "),K+=d&&!Q?'<span class="sod_label sod_placeholder">'+d+"</span>":'<span class="sod_label">'+l+"</span>",N=A("<span/>",{id:W,"class":"sod_select "+T+U,title:Y,tabindex:P,html:K,"data-cycle":X,"data-links":M,"data-links-external":Z,"data-placeholder":d,"data-placeholder-option":R,"data-prefix":Q,"data-filter":""}).insertAfter(this),G.isTouch()&&N.addClass("touch"),j=A("<span/>",{"class":"sod_list_wrapper"}).appendTo(N),O=A("<span/>",{"class":"sod_list"}).appendTo(j),A("option, optgroup",S).each(function(b){var c=A(this);
L&&!A.trim(c.text())?c.remove():0===b&&R&&!l?G.populateSoD(c,O,N,!0):G.populateSoD(c,O,N,!1);}),e&&(j.show(),A(".sod_option:lt("+e+")",O).each(function(){V+=A(this).outerHeight();}),j.removeAttr("style"),O.css({"max-height":V})),S.appendTo(N),N.on("focusin",G.focusSod).on("click",G.triggerSod).on("click",".sod_option",G.optionClick).on("mousemove",".sod_option",G.optionHover).on("keydown",G.keyboardUse),S.on("change",G.selectChange),A(document).on("click","label[for='"+S.attr("id")+"']",function(a){a.preventDefault(),N.focus();
});}});},populateSoD:function(L,d,M,Q){var T=M.data("placeholder"),U=M.data("placeholder-option"),R=M.data("prefix"),O=M.find(".sod_label"),Y=L.parent(),P=L.text(),V=L.val(),K=L.data("custom-id")?L.data("custom-id"):null,X=L.data("custom-class")?L.data("custom-class"):"",Z=L.is(":disabled")?" disabled ":"",N=L.is(":selected")?" selected active ":"",J=L.data("link")?" link ":"",W=L.data("link-external")?" linkexternal":"",S=L.prop("label");
L.is("option")?(A("<span/>",{"class":"sod_option "+X+Z+N+J+W,id:K,title:P,html:G.escapeString(P),"data-value":V}).appendTo(d),Q&&!R?(M.data("label",P),M.data("placeholder",P),L.prop("disabled",!0),d.find(".sod_option:last").addClass("is-placeholder disabled"),N&&O.addClass("sod_placeholder")):N&&T&&!U&&!R?M.data("label",T):N&&M.data("label",P),(N&&!T||N&&U||N&&R)&&O.append(G.escapeString(P)),Y.is("optgroup")&&(d.find(".sod_option:last").addClass("groupchild"),Y.is(":disabled")&&d.find(".sod_option:last").addClass("disabled"))):A("<span/>",{"class":"sod_option optgroup "+Z,title:S,html:S,"data-label":S}).appendTo(d);
},escapeString:function(K){var J={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;",8364:"&#8364;","'":"&#39;","#":"&#35;","(":"&#40;",")":"&#41;","/":"&#x2F;"};return K.replace(/[&<>"'\/()#]/g,function(L){return J[L];});},focusSod:function(){var J=A(this);J.hasClass("disabled")?G.blurSod(J):(G.blurSod(A(".sod_select.focus").not(J)),J.addClass("focus"),A("html").on("click.sodBlur",function(){G.blurSod(J);
}));},triggerSod:function(M){M.stopPropagation();var K=A(this),N=K.find(".sod_list"),J=K.data("placeholder"),L=K.find(".active"),O=K.find(".selected");K.hasClass("disabled")||K.hasClass("open")||K.hasClass("touch")?(clearTimeout(F),K.removeClass("open"),J&&(K.find(".sod_label").get(0).lastChild.nodeValue=L.text())):(K.addClass("open"),J&&!K.data("prefix")&&K.find(".sod_label").addClass("sod_placeholder").html(J),G.listScroll(N,O),G.checkViewport(K,N));
},keyboardUse:function(R){var S,L,N,M=A(this),J=M.find(".sod_list"),P=M.find(".sod_option"),K=M.find(".sod_label"),O=M.data("cycle"),Q=P.filter(".active");return R.which>36&&R.which<41?(37===R.which||38===R.which?(L=Q.prevAll(":not('.disabled, .optgroup')").first(),N=P.not(".disabled, .optgroup").last()):(39===R.which||40===R.which)&&(L=Q.nextAll(":not('.disabled, .optgroup')").first(),N=P.not(".disabled, .optgroup").first()),!L.hasClass("sod_option")&&O&&(L=N),(L.hasClass("sod_option")||O)&&(Q.removeClass("active"),L.addClass("active"),K.get(0).lastChild.nodeValue=L.text(),G.listScroll(J,L),M.hasClass("open")||(D=!0)),!1):(13===R.which||32===R.which&&M.hasClass("open")&&(" "===M.data("filter")[0]||""===M.data("filter"))?(R.preventDefault(),Q.click()):32!==R.which||M.hasClass("open")||" "!==M.data("filter")[0]&&""!==M.data("filter")?27===R.which&&G.blurSod(M):(R.preventDefault(),D=!1,M.click()),void (0!==R.which&&(clearTimeout(C),M.data("filter",M.data("filter")+String.fromCharCode(R.which)),S=P.filter(function(){return 0===A(this).text().toLowerCase().indexOf(M.data("filter").toLowerCase());
}).not(".disabled, .optgroup").first(),S.length&&(Q.removeClass("active"),S.addClass("active"),G.listScroll(J,S),K.get(0).lastChild.nodeValue=S.text(),M.hasClass("open")||(D=!0)),C=setTimeout(function(){M.data("filter","");},500))));},optionHover:function(){var J=A(this);J.hasClass("disabled")||J.hasClass("optgroup")||J.siblings().removeClass("active").end().addClass("active");
},optionClick:function(M){M.stopPropagation();var K=A(this),O=K.closest(".sod_select"),J=K.hasClass("disabled"),L=K.hasClass("optgroup"),N=O.find(".sod_option:not('.optgroup')").index(this);O.hasClass("touch")||(J||L||(O.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),K.addClass("selected"),O.find("select option")[N].selected=!0,O.find("select").change()),clearTimeout(F),O.removeClass("open"));
},selectChange:function(){var K=A(this),J=K.find(":selected"),L=J.text(),M=K.closest(".sod_select");M.find(".sod_label").get(0).lastChild.nodeValue=L,M.data("label",L),B.onChange.call(this),!M.data("links")&&!J.data("link")||J.data("link-external")?(M.data("links-external")||J.data("link-external"))&&window.open(J.val(),"_blank"):window.location.href=J.val();
},blurSod:function(L){if(A("body").find(L).length){var K=L.data("label"),N=L.data("placeholder"),J=L.find(".active"),M=L.find(".selected"),O=!1;clearTimeout(F),D&&!J.hasClass("selected")?(J.click(),O=!0):J.hasClass("selected")||(J.removeClass("active"),M.addClass("active")),!O&&N?L.find(".sod_label").get(0).lastChild.nodeValue=M.text():O||(L.find(".sod_label").get(0).lastChild.nodeValue=K),D=!1,L.removeClass("open focus"),L.blur(),A("html").off(".sodBlur");
}},checkViewport:function(L,K){var M=L[0].getBoundingClientRect(),J=K.outerHeight();M.bottom+J+10>A(window).height()&&M.top-J>10?L.addClass("above"):L.removeClass("above"),F=setTimeout(function(){G.checkViewport(L,K);},200);},listScroll:function(M,K){var J=M[0].getBoundingClientRect(),L=K[0].getBoundingClientRect();
J.top>L.top?M.scrollTop(M.scrollTop()-J.top+L.top):J.bottom<L.bottom&&M.scrollTop(M.scrollTop()-J.bottom+L.bottom);},isTouch:function(){return"ontouchstart" in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;}},I={destroy:function(){return this.each(function(){var K=A(this),J=K.parent();
J.hasClass("sod_select")?(K.off("change"),J.find("span").remove(),K.unwrap()):console.log("Select or Die: There's no SoD to destroy");});},update:function(){return this.each(function(){var K=A(this),J=K.parent(),L=J.find(".sod_list:first");J.hasClass("sod_select")?(L.empty(),J.find(".sod_label").get(0).lastChild.nodeValue="",K.is(":disabled")&&J.addClass("disabled"),A("option, optgroup",K).each(function(){G.populateSoD(A(this),L,J);
})):console.log("Select or Die: There's no SoD to update");});},disable:function(J){return this.each(function(){var K=A(this),L=K.parent();L.hasClass("sod_select")?"undefined"!=typeof J?(L.find(".sod_list:first .sod_option[data-value='"+J+"']").addClass("disabled"),L.find(".sod_list:first .sod_option[data-label='"+J+"']").nextUntil(":not(.groupchild)").addClass("disabled"),A("option[value='"+J+"'], optgroup[label='"+J+"']",this).prop("disabled",!0)):L.hasClass("sod_select")&&(L.addClass("disabled"),K.prop("disabled",!0)):console.log("Select or Die: There's no SoD to disable");
});},enable:function(J){return this.each(function(){var K=A(this),L=K.parent();L.hasClass("sod_select")?"undefined"!=typeof J?(L.find(".sod_list:first .sod_option[data-value='"+J+"']").removeClass("disabled"),L.find(".sod_list:first .sod_option[data-label='"+J+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),A("option[value='"+J+"'], optgroup[label='"+J+"']",this).prop("disabled",!1)):L.hasClass("sod_select")&&(L.removeClass("disabled"),K.prop("disabled",!1)):console.log("Select or Die: There's no SoD to enable");
});}};return I[E]?I[E].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof E&&E?void A.error('Select or Die: Oh no! No such method "'+E+'" for the SoD instance'):G.initSoD.apply(this,arguments);};}(jQuery);