if(!!window.BMSiteNavigation===false){window.BMSiteNavigation={};}(function(A){A(function(){if(window.BMSiteNavigation.loaded===true){return ;}function C(D){return typeof D==="string"||D instanceof String;}function B(D){return D!==null&&typeof D==="object";}if(A(".bm-welcome-page").size()>0){A("body").removeClass("bm-welcome-page").addClass("bm-welcome-page");
}setTimeout(function(){if(!!BMSiteNavigation.menuURLStart===false){return ;}var F=A("select[name=SelectedSiteID]").val()||A("#bm-selected-site-link-label").size()>0;if(F){A(".goto-storefront").click(function(){window.open(BMSiteNavigation.bmMenuStorefrontURL);return false;});}else{A(".goto-storefront").attr("href",BMSiteNavigation.bmMenuSiteSelectionURL);
A(".goto-storefront-toolkit").attr("href",BMSiteNavigation.bmMenuSiteSelectionURL).attr("target","");}var J=0;var I=1;var G=[];G[J]={name:"merchants",menuStartNode:"CreateSiteNavigationBarBM",parentKey:".menu.bm-dropdown-menu.merchant-tools",menuKey:".merchant-tool-menu",orderedColumns:{"site-obj":0,"customers":0,"site-urls":0,"prod-cat":1,"search":2,"marketing":3,"content":0,"orders":1,"analytics":3,"site-prefs":4,"custom":2}};
G[I]={name:"administrators",menuStartNode:"CreateAdminNavigationBarBM",parentKey:".menu.bm-dropdown-menu.admin",menuKey:".administration-menu",orderedColumns:{"global-replication":0,"organization":0,"sites":1,"studio":2,"global-prefs":3,"operations":4,"worldwidedistribution":4,"custom":1}};function E(O){var R=A(O).width();
var Q=400;try{Q=A(O).parent().position().left+A(O).parent().outerWidth();}catch(P){}if(R<Q){A(O).css({"left":"auto","margin-left":"-20px"});}}function D(Q){var R=A(window).height()-A("#bm_header_row").height();var P=A(window).width();var S=A(Q).width();var O=A(Q).height();if(S>P){A(Q).css("width",P-20);
}if(O>R){A(Q).css("height",R-20);}}function L(O){this.message=O;this.name="LoadMenuException";}function K(O){var Q=400;try{Q=A(O).parent().position().left+A(O).parent().outerWidth();}catch(P){}if(A(O).outerWidth()<Q){A(O).css({"left":"auto","margin-left":"-20px"});}else{A(O).css({"left":"0","margin-left":"0"});
}}function M(O){A(".bm-menu-search-bar",O).show();setTimeout(function(){A(O).css("width",A(O).outerWidth());},500);A(".bm-menu-search",O).keyup(function(){var P=A(this).val();if(P.length>0){A(".overview_item_bm",O).hide();A(".section-name, .bm-menu-column",O).hide();A(".bm-menu-head",O).hide();A.each(A(".overview_item_bm",O),function(R,S){var Q=A(S).text().toLowerCase();
if(Q.indexOf(P.toLowerCase())!==-1){A(S).show();A(S).parents(".section-name, .bm-menu-column").show();A(S).parents(".section-name").find(".bm-menu-head").show();}else{A(S).hide();}});}else{A(".section-name, .bm-menu-column",O).show();A(".bm-menu-head",O).show();A(".section-name .overview_item_bm",O).show();
}K(O);});}function N(O){setTimeout(function(){if(A(O).hasClass("show-menu")&&A(O).find(".the-menu").is(":visible")){var P=A(O).find(".the-menu input").outerHeight();A(O).find(".the-menu input").css("height",0);A(O).find(".the-menu input").focus();A(O).find(".the-menu input").css("height",P);}},250);}var H=function(P){if(!C(P.name)){throw"Error: menu configuration option missing string property 'name'.";
}if(!C(P.menuStartNode)){throw"Error: menu configuration option missing string property 'menuStartNode'.";}if(!C(P.menuKey)){throw"Error: menu configuration option missing string property 'menuKey'.";}if(!B(P.orderedColumns)){throw"Error: menu configuration option missing object property 'orderedColumns'.";
}var O=A(".bm-site-navigation-menus").find(P.menuKey);A(O,".menu-overview-link "+P.menuKey).click(function(){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",P.menuKey);});if(localStorage&&localStorage.getItem("bm-site-nav-last-menu-section")===P.menuKey){A(O).parent(".menu").addClass("active");
}A.ajax({url:BMSiteNavigation.menuURLStart.replace("___StartNode___",P.menuStartNode),dataType:"html",contentType:"text/html,application/xhtml+xml,application/xml",success:function(R){window.BMSiteNavigation.loaded=true;var Q=P.orderedColumns;A.each(A(".section-name",R),function(S,V){var T=A(V).attr("section-name");
var U;if(typeof Q[T]==="undefined"){U=A(".bm-menu-column:eq("+Q["custom"]+")",O).show();}else{U=A(".bm-menu-column:eq("+Q[T]+")",O).show();}A(".section-name."+T,R).appendTo(U,O);});if(window.BMCSRFInjector!=null){window.BMCSRFInjector.injectInDoc(O[0]);}E(O);D(O);M(O);},error:function(Q){throw new L("Error retrieving menu for "+(P.name||"unknown"));
}});};if(A("#homepageiframediv").size()>0){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",null);}A("body").click(function(O){A(".bm-dropdown-menu").removeClass("show-menu");});A("body").keyup(function(O){if(O.which===27){A(".bm-dropdown-menu").removeClass("show-menu");}});A(".the-menu").click(function(O){if((O.ctrlKey||O.metaKey||O.shiftKey||O.altKey||(O.button!==1))&&A(O.target).is("a")){O.stopPropagation();
return true;}if(A(O.target).hasClass("bm-menu-search")||A(O.target).hasClass("the-menu")||A(O.target).parents(".the-menu").length){O.stopPropagation();return false;}});A(".menu.merchant-tools .menu-overview-link-icon").click(function(Q){A(".bm-dropdown-menu.admin.show-menu").removeClass("show-menu");
if(F){var P=Q.currentTarget;var O=A(P).parents(".bm-dropdown-menu").first();A(O).toggleClass("show-menu");D(A(".the-menu",O));N(O);Q.stopPropagation();return false;}});A(".menu.admin .menu-overview-link").click(function(O){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",".administration-menu");
});A(".menu.merchant-tools .menu-overview-link").click(function(O){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",".merchant-tool-menu");});A(".menu.admin .menu-overview-link-icon").click(function(Q){A(".bm-dropdown-menu.merchant-tools.show-menu").removeClass("show-menu");var P=Q.currentTarget;
var O=A(P).parents(".bm-dropdown-menu").first();A(O).toggleClass("show-menu");D(A(".the-menu",O));N(O);Q.stopPropagation();return false;});if(F){H(G[J]);}H(G[I]);},50);});})(jQuery);