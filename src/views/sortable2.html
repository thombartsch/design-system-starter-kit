<!DOCTYPE html>
<html lang="en" class="list-view">

  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>.: Page Designer :.</title>
    <meta name="robots" content="noindex, nofollow"/>
    <link rel="icon" type="image/png" href="/favicon.png"/>
    <link rel="stylesheet" href="/styles/index.css"/>
    <!-- Prototype styles -->
  </head>

  <body>

    {% include "_inc_builder-popovers-toolbar.html" %}
    <main class="app-wrapper">
      <div id="builder" class="slds-grid slds-col">
          <div id="pd-menu">

            <div class="cb-AppNav js-app-nav">
              <span class="cb-AppNav-button js-component-palette-button" data-type="component-palette">
                <span class="cb-AppNav-buttonIcon">
                  <svg aria-hidden="true" class="slds-icon--x-small">
                    <!--use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#connected_apps"></use-->
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#add"></use>
                  </svg>
                </span>
                <span class="cb-AppNav-buttonLabel">Components</span>
              </span>
              <div class="cb-LeftPanel-container js-left-panel-container slds-hide" id="component-palette-menu">
                <div class="slds-panel slds-size_medium slds-panel_docked slds-panel_docked-left slds-is-open" aria-hidden="false">
                  <div class="slds-panel__header slds-p-left_small">
                    <h2 class="slds-panel__header-title slds-text-heading_small slds-truncate slds-text-align_left slds-p-left_none slds-m-left_none"
                    style="text-align:left;" title="Components">Components</h2>
                    <button class="slds-button slds-button_icon slds-button_icon-small slds-panel__close js-trigger-close" title="Collapse Panel Header">
                      <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                      </svg>
                      <span class="slds-assistive-text">Collapse Panel Header</span>
                    </button>
                  </div>
                  <div class="slds-panel__body slds-p-around_none">

                    <div class="slds-form-element slds-p-left_small slds-p-top_small slds-p-right_small">
                        <!--label class="slds-form-element__label" for="text-input-id-1">Input Label</label-->
                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right">
                            <svg class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default" aria-hidden="true">
                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#search" />
                            </svg>
                            <input type="text" id="text-input-id-1" class="slds-input" placeholder="Search Components" />
                            <button class="slds-input__icon slds-input__icon_right slds-button slds-button_icon slds-hide">
                                <svg class="slds-button__icon slds-icon-text-light" aria-hidden="true">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#clear" />
                                </svg>
                                <span class="slds-assistive-text">Clear</span>
                            </button>
                        </div>
                    </div>


                    <div>

                      <!-- //COMPONENTS-->
                      <ul class="tools">
                        <li class="component">
                          Banner
                        </li>
                        <li class="component">
                          Image & Text
                        </li>
                        <li class="component">
                          RTF
                        </li>
                      </ul>
                      <!-- //COMPONENTS-->



                    </div>


                  </div>
                </div>
              </div>




              <span class="cb-AppNav-button js-page-structure-button" data-type="page-structure">
                <span class="cb-AppNav-buttonIcon">
                  <svg aria-hidden="true" class="slds-icon--x-small">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#list"></use>
                  </svg>
                </span>
                <span class="cb-AppNav-buttonLabel">Page Structure</span>
              </span>
              <!-- page structure -->
              <div class="cb-LeftPanel-container js-left-panel-container slds-hide" id="page-structure-menu">
                <div class="slds-panel slds-size_medium slds-panel_docked slds-panel_docked-left slds-is-open" aria-hidden="false">
                  <div class="slds-panel__header slds-p-left_small">
                    <h2 class="slds-panel__header-title slds-text-heading_small slds-truncate slds-text-align_left slds-p-left_none slds-m-left_none"
                    style="text-align:left;" title="Page Structure">Page Structure</h2>
                    <button class="slds-button slds-button_icon slds-button_icon-small slds-panel__close js-trigger-close" title="Collapse Panel Header">
                      <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                      </svg>
                      <span class="slds-assistive-text">Collapse Panel Header</span>
                    </button>
                  </div>
                  <div class="slds-panel__body slds-p-around_none">

                    <div id="tab-properties" class="slds-tabs_default__content slds-hide" role="tabpanel" aria-labelledby="tab-nav-properties__item"></div>
                    <div id="tab-navigator" class="slds-tabs_default__content slds-hide" role="tabpanel" aria-labelledby="tab-nav-navigator__item"></div>

                    <ul class="slds-tree" role="tree" aria-labelledby="treeheading" id="tree-header">
                        <li role="treeitem" aria-level="1" aria-expanded="true" aria-label="Tree Branch">
                            <div class="slds-tree__item">
                                <button class="slds-button slds-button_icon slds-button_icon slds-m-right_x-small" aria-hidden="true" tabindex="-1" title="Expand Tree Branch">
                                    <svg class="slds-button__icon slds-button__icon_small" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#chevronright" />
                                    </svg>
                                    <span class="slds-assistive-text">Expand</span>
                                </button>
                                <span class="slds-size_1-of-1">
                                    <span class="slds-tree__item-label slds-truncate" title="Tree Branch">Page Header
                                    <svg class="slds-icon slds-icon-text-default slds-icon_xx-small" aria-hidden="true">
                                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#lock"></use>
                                    </svg>
                                </span>
                            </div>
                            <ul role="group">
                                <li role="treeitem" aria-level="2" aria-selected="false">
                                <div class="slds-tree__item">
                                    <button class="slds-button slds-button_icon slds-m-right_x-small slds-is-disabled" aria-hidden="true" tabindex="-1" title="Expand Tree Item">
                                        <svg class="slds-button__icon slds-button__icon_small" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#chevronright" />
                                        </svg>
                                        <span class="slds-assistive-text">Expand</span>
                                    </button>
                                    <span class="slds-size_1-of-1">
                                        <span class="slds-tree__item-label slds-truncate" title="Tree Item">Navigation</span>
                                    </span>
                                </div>
                                </li>
                            </ul>
                        </li>
                    </ul>



                    <ul class="slds-tree" role="tree" aria-labelledby="treeheading">
                        <li role="treeitem" aria-level="1" aria-expanded="true" aria-label="Tree Branch">
                            <div class="slds-tree__item">
                                <button class="slds-button slds-button_icon slds-button_icon slds-m-right_x-small" aria-hidden="true" tabindex="-1" title="Expand Tree Branch">
                                    <svg class="slds-button__icon slds-button__icon_small" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#chevronright" />
                                    </svg>
                                    <span class="slds-assistive-text">Expand</span>
                                </button>
                                <span class="slds-size_1-of-1">
                                    <span class="slds-tree__item-label slds-truncate" title="Tree Branch">Content</span>
                                </span>
                            </div>
                            <!--ul role="tree" class="slds-has-dividers_bottom-space" id="listStructure">
                            </ul-->
                            <!-- page structure -->
                            <div>
                              <ul id="pagestructure">
                                <li>
                                  <ul>
                                    page structure
                                  </ul>
                                </li>
                              </ul>
                            </div>
                            <!-- /page structuer -->
                        </li>
                    </ul>






                    <ul class="slds-tree" role="tree" aria-labelledby="treeheading" id="tree-footer">
                        <li role="treeitem" aria-level="1" aria-expanded="true" aria-label="Tree Branch">
                            <div class="slds-tree__item">
                                <button class="slds-button slds-button_icon slds-butt on_icon slds-m-right_x-small" aria-hidden="true" tabindex="-1" title="Expand Tree Branch">
                                    <svg class="slds-button__icon slds-button__icon_small" aria-hidden="true">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#chevronright" />
                                    </svg>
                                    <span class="slds-assistive-text">Expand</span>
                                </button>
                                <span class="slds-size_1-of-1">
                                    <span class="slds-tree__item-label slds-truncate" title="">Page Footer
                                    <svg class="slds-icon slds-icon-text-default slds-icon_xx-small" aria-hidden="true">
                                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#lock"></use>
                                    </svg>
                                </span>
                            </div>
                            <ul role="group">
                                <li role="treeitem" aria-level="2" aria-selected="false">
                                <div class="slds-tree__item">
                                    <button class="slds-button slds-button_icon slds-m-right_x-small slds-is-disabled" aria-hidden="true" tabindex="-1" title="Expand Tree Item">
                                        <svg class="slds-button__icon slds-button__icon_small" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#chevronright" />
                                        </svg>
                                        <span class="slds-assistive-text">Expand</span>
                                    </button>
                                    <span class="slds-size_1-of-1">
                                        <span class="slds-tree__item-label slds-truncate" title="Tree Item">Static Footer Content</span>
                                    </span>
                                </div>
                                </li>
                            </ul>
                        </li>
                    </ul>


                  </div>
                </div>
              </div>

              <!-- //page structure -->

              <span class="cb-AppNav-button js-page-settings-button" data-type="settings">
                <span class="cb-AppNav-buttonIcon">
                  <svg aria-hidden="true" class="slds-icon--x-small">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#settings"></use>
                  </svg>
                </span>
                <span class="cb-AppNav-buttonLabel">Page Settings</span>
              </span>
            </div>








          </div>
          <div id="panel_editor" class="slds-hide modal">
              <!-- PANEL EDITOR RIGHT -->
              {% include "_inc_builder-panel-editor.html" %}
              <!-- /PANEL EDITOR  RIGHT -->
          </div>


          <div 2id="canvas" class="slds-col slds-text-align_top slds-p-around_small slds-scrollable_y slds-grid_vertical-align-top">
                <!--div class="slds-drop-zone_drag__slot"-->
                  {% include "_inc_header-editor.html" %}
                  <!--div 3class="slds-align_absolute-center slds-col slds-grid slds-grid_vertical-align-start" class="2slds-align_absolute-center slds-m-top_medium slds-m-left_none"-->
                  <div class="slds-col slds-grid">
                      <!-- EDITOR REGION 1 -->
                      <div class="slds-col slds-p-left_small" id="">
                        <!--div class="slds-drop-zone slds-m-top_small region" id="regionA" ondragover="allowDrop(event)" ondragleave="resetDrop(event)" style="min-height:20px; margin-top:2rem"></div-->
                        <ul id="canvas">
                          <li class="slds-drop-zone 2slds-drop-zone_drag" ondragover="allowDrop(event)" ondragleave="resetDrop(event)">
                            <div class="slds-drop-zone__label slds-hide">
                                  <div class="slds-media slds-media_center">
                                    <div class="slds-media__figure">
                                      <span class="slds-icon_container slds-icon-utility-builder slds-current-color">
                                        <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">
                                          <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#builder"></use>
                                        </svg>
                                      </span>
                                    </div>
                                    <div class="slds-media__body">
                                      <h2>Content</h2>
                                    </div>
                                  </div>
                                </div>
                                <ul class="region" ondrop="drop(event)">
                                    region 1
                                </ul>
                          </li>
                        </ul>
                      </div>
                      <!-- /EDITOR REGION 1 -->
                    </div>
                  <!--/div-->
                  {% include "_inc_footer-editor.html" %}
              </div>

        </div>
    </main>


    <script language="javascript" src='/scripts/jquery-3.2.1.min.js'></script>
    <script language="javascript" src='/scripts/jquery-ui.min.js'></script>
    <script language="javascript" src='/scripts/utils.js'></script>
    <script language="javascript" src='/scripts/tether.min.js'></script>
    <script language="javascript" src='/scripts/html5sortable.js'></script>

    <script src="/scripts/jquery.caret.min.js"></script>
    <script src="/scripts/jquery.tag-editor.js"></script>


    <script>
      function allowDrop(event) {
        /*
        event.preventDefault();
        document.getElementById("demo").innerHTML = "The p element is OVER the droptarget.";
        event.target.style.border = "4px dotted green";
        */
        event.target.style.border = "4px dotted green";
        console.log('allow drop');
      }
      function drop(event) {
        /*
        event.preventDefault();
        var data = event.dataTransfer.getData("Text");
        event.target.appendChild(document.getElementById(data));
        document.getElementById("demo").innerHTML = "The p element was dropped.";
        */
        event.target.style.border = "none";
        console.log('drop');
      }
      function resetDrop(event) {
        /*
        event.preventDefault();
        var data = event.dataTransfer.getData("Text");
        event.target.appendChild(document.getElementById(data));
        document.getElementById("demo").innerHTML = "The p element was dropped.";
        */
        event.target.style.border = "none";
        console.log('reset Drop');
      }
      function dragStart(event) {
        //event.dataTransfer.setData("Text", event.target.id);
        console.log('drag start');
      }


      //SORTABLE CLONING - sortable('.tools');
      sortable('.tools', {
        items: ':not(.disabled)',
        acceptFrom: false,
        copy: true
      });

      sortable('#canvas .region', {
        acceptFrom: '.tools,.region'
      });

      /*
      sortable('#pagestructure .region', {
        //acceptFrom: '.tools,.region'
      });
      */


      document.querySelector('#canvas ul').addEventListener('sortupdate', function(e){
        sortable('reload');
        console.log('updated canvas');
        document.querySelector('#pagestructure').innerHTML = document.querySelector('#canvas').innerHTML;
        $('#pagestructure .component').css('display', '')
        $('#canvas .component').css('display', '')
        sortable('reload');

      });

      document.querySelector('#pagestructure ul').addEventListener('sortupdate', function(e){
        sortable('reload');
        console.log('update structure');
        document.querySelector('#canvas').innerHTML = document.querySelector('#pagestructure').innerHTML;
        $('#pagestructure .component').css('display', '')
        $('#canvas .component').css('display', '')
        sortable('reload');
      });


      //PD MENU
      $('.js-component-palette-button').click(function() {
        $('.js-component-palette-button').removeClass('is-active');
        $('#component-palette-menu').addClass('slds-hide');
        $('.js-page-structure-button').removeClass('is-active');
        $('#page-structure-menu').addClass('slds-hide');
        $('#modal-page-settings').addClass('slds-hide');
        $('.js-component-palette-button').addClass('is-active');
        $('#component-palette-menu').removeClass('slds-hide');
      });

      //PAGE STRUCTURE
      $('.js-page-structure-button').click(function() {
        $('.js-component-palette-button').removeClass('is-active');
        $('#component-palette-menu').addClass('slds-hide');
        $('.js-page-structure-button').removeClass('is-active');
        $('#page-structure-menu').addClass('slds-hide');
        $('#modal-page-settings').addClass('slds-hide');
        $('.js-page-structure-button').toggleClass('is-active');
        $('#page-structure-menu').toggleClass('slds-hide');
      });

      //PAGE SETTINGS
      $('.js-page-settings-button').click(function() {
        $('.js-component-palette-button').removeClass('is-active');
        $('#component-palette-menu').addClass('slds-hide');
        $('.js-page-structure-button').removeClass('is-active');
        $('#page-structure-menu').addClass('slds-hide');
        $('#modal-page-settings').addClass('slds-hide');

        /*
        $('#page-settings-general').removeClass('slds-active');
        $('#page-settings-seo').removeClass('slds-active');
        $('#page-settings-rules').removeClass('slds-active');
        $('#tab-default-11').removeClass('slds-show');
        $('#tab-default-21').removeClass('slds-show');
        $('#tab-default-31').removeClass('slds-show');
        $('#tab-default-32').removeClass('slds-show');

        $('#tab-default-11').addClass('slds-hide');
        $('#tab-default-21').addClass('slds-hide');
        $('#tab-default-31').addClass('slds-hide');
        $('#tab-default-32').addClass('slds-hide');

        $('#tab-default-11').addClass('slds-show');
        */

        $('#page-settings-general').addClass('slds-active');
        $('#modal-page-settings').toggleClass('slds-hide');
      });

      /*
      $('#region1').hover(function(){
        console.log('in');
        $('#dropzone1').toggleClass('slds-drop-zone');
        $('#dropzone1').toggleClass('slds-drop-zone_drag');
        return false;
      });
      */


      //CLOSE PD Panels
      $('#component-palette-menu .js-trigger-close').click(function(e) {
          console.log('close component palette now');
          $('.js-component-palette-button').removeClass('is-active');
          $('#component-palette-menu').addClass('slds-hide');
      });

      $('#page-structure-menu .js-trigger-close').click(function(e) {
          //console.log('close component palette now');
          $('.js-page-structure-button').removeClass('is-active');
          $('#page-structure-menu').addClass('slds-hide');
      });




    </script>



  </body>
</html>
