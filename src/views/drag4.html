<!DOCTYPE html>
<html lang='en' class='list-view'>

  <head>
    <meta charset='utf-8'/>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'/>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'/>
    <title>.: Page Designer :.</title>
    <meta name='robots' content='noindex, nofollow'/>
    <link rel='icon' type='image/png' href='/favicon.png'/>
    <link rel='stylesheet' href='/styles/index.css'/>
    <!-- Prototype styles -->
  </head>

  <body>

<div class="slds-grid slds-p-around_small">
  <div class="slds-col">
    <!--button id="new">1</<button type="button" name="button"></button>-->
    <ul class="builder-elements" id="components">
      <li class="builder-element" style="width:100%">
        <div class="component slds-grid">
          <div>
            <span class="slds-icon_container" title="Description of icon when needed">
              <svg class="slds-icon slds-icon-text-default slds-icon_xx-small" aria-hidden="true">
                <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#drag_and_drop"></use>
              </svg>
              <span class="slds-assistive-text">Drag Drop</span>
            </span>
          </div>
          <div>
            <span class="slds-icon_container" title="Description of icon when needed">
              <svg class="slds-icon slds-icon-text-default slds-icon_xx-small" aria-hidden="true">
                <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#announcement"></use>
              </svg>
              <span class="slds-assistive-text">Component Name</span>
            </span>
          </div>
          <div>
            component A
          </div>
        </div>
        <div class="placeholder">
          <div class="slds-drop-zone__container slds-is-hovered" tabindex="-1">
            <div class="slds-drop-zone__label slds-drop-zone__label_container">
              <div class="slds-media slds-media_center">
                <div class="slds-media__figure">
                  <span class="slds-icon_container slds-icon-utility-connected_apps slds-current-color">
                    <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">
                      <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#connected_apps"></use>
                    </svg>
                  </span>
                </div>
                <div class="slds-media__body">
                  <h2>
                    <button class="slds-drop-zone__label_button slds-button_reset">
                      <span class="slds-assistive-text">Edit: </span>
                      <span>Component Name</span>
                    </button>
                  </h2>
                </div>
              </div>
            </div>
            <div class="demo-only demo-component" style="width:100%;height:10rem"></div>
            <div class="slds-drop-zone__actions">
              <div class="slds-button-group" role="group">
                <button class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" title="Move">
                  <svg class="slds-button__icon" aria-hidden="true">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#move"></use>
                  </svg>
                  <span class="slds-assistive-text">Move</span>
                </button>
                <button class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" title="Close">
                  <svg class="slds-button__icon" aria-hidden="true">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                  </svg>
                  <span class="slds-assistive-text">Close</span>
                </button>
              </div>
            </div>
          </div>

        </div>
        <div class="pagestructure">structure A</div>
      </li>




    </ul>
  </div>

  <div class="slds-col" id="canvas">
      <div class="builder-section">
          <div class="section-content">

            <div class="slds-drop-zone_holder 2slds-drop-zone_drag-off">
              <div class="slds-drop-zone__label">
                <div class="slds-media slds-media_center">
                  <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-utility-builder slds-current-color">
                      <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#builder"></use>
                      </svg>
                    </span>
                  </div>
                  <div class="slds-media__body"><h2>Content</h2></div>
                </div>
              </div>
              <!-- region -->
              <ul class="builder-elements" style="min-height:20px">
              </ul>
              <!-- /region -->
            </div>

          </div>
      </div>
      <div class="builder-section">
          <div class="section-content">
            <div class="slds-drop-zone_holder 2slds-drop-zone_drag-off">
              <div class="slds-drop-zone__label">
                <div class="slds-media slds-media_center">
                  <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-utility-builder slds-current-color">
                      <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#builder"></use>
                      </svg>
                    </span>
                  </div>
                  <div class="slds-media__body"><h2>Content</h2></div>
                </div>
              </div>
              <!-- region -->
              <ul class="builder-elements" style="min-height:20px;">
              </ul>
              <!-- /region -->
            </div>

          </div>
      </div>
      <!--div class="clone-section">
          <div class="section-content">
              <ul class="builder-elements">
                  <li class="builder-element">Clone Item 1</li>
                  <li class="builder-element">Clone Item 2</li>
              </ul>
          </div>
      </div-->
    </div>

    <div class="slds-col" id="pageStructure">
      {#
      <div class="section-content">
          <ul class="builder-elements">
              <li class="builder-element">Item 1</li>
              <li class="builder-element">Item 2</li>
          </ul>
      </div>
      #}
    </div>
</div>


<script src='/scripts/jquery-3.2.1.min.js'></script>
<script src='/scripts/jquery-ui.min.js'></script>
<script src='/scripts/utils.js'></script>
<script src='/scripts/tether.min.js'></script>

<script>
  $(function() {
      $("#components li").draggable({
          connectToSortable: '.builder-elements',
          helper: 'clone'
      });

      $(".builder-elements").sortable({
        connectWith: '.builder-elements',
        stop: function(event,ui){
          //sort in canvas
          //console.log("sorted left");
          $('#canvas').removeClass('ui-draggable-handle');
          document.querySelector('#pageStructure').innerHTML = document.querySelector('#canvas').innerHTML;
          $("#pageStructure .builder-elements").sortable({
            connectWith: '#pageStructure .builder-elements',
            stop: function(event,ui){
              //sort in structure
              //console.log("sorted left");
              document.querySelector('#pageStructure').innerHTML = document.querySelector('#canvas').innerHTML;
            }
          });
        }
      });
  });


{#
  $('.builder-elements').sortable({
    connectWith: ".builder-elements"
  });




  $('#new').click(function () {
      $('.builder-elements').sortable("destroy")
      $('.clone-section')
          .clone(true) //Clone the hidden section
      .removeClass('clone-section') //Remove the clone class
      .addClass('builder-section') //Add the section class
      .appendTo('#form') //Append cloned section to form
      $('.builder-elements').sortable({
          connectWith: '.builder-elements'
      });
  });
  /** Last section will be cloned and appended to the form
  Items in the cloned section can be sorted to other existing sections, but...
  1) When the dynamic section is appended the sorting should work as in  normal section.
  2) Drag & drop of items between exiting and cloned sections to be allowed.

  */

  #}
</script>

<style>
  .dragged, .ui-sortable-helper{
    -webkit-transition: transform .25s ease-in-out;
    -moz-transition: transform .25s ease-in-out;
    -o-transition: transform .25s ease-in-out;
    transition: transform .25s ease-in-out;

    -webkit-transition: box-shadow .25s ease-in-out;
    -moz-transition: box-shadow .25s ease-in-out;
    -o-transition: box-shadow .25s ease-in-out;
    transition: box-shadow .25s ease-in-out;
    &:hover {
      cursor: pointer;
      background-color: #eaeaea;
    }
  }
  /* styles during drag */
  .draggable-item.ui-sortable-helper {
    background-color: #e5e5e5;
    -webkit-box-shadow: 0 0 8px rgba(53,41,41, .8);
    -moz-box-shadow: 0 0 8px rgba(53,41,41, .8);
    box-shadow: 0 0 8px rgba(53,41,41, .8);
    transform: scale(1.015);
    z-index: 100;
  }
  .draggable-item.ui-sortable-placeholder {
    background-color: #ddd;
    -moz-box-shadow:    inset 0 0 10px #000000;
     -webkit-box-shadow: inset 0 0 10px #000000;
     box-shadow:         inset 0 0 10px #000000;
  }

  /* show hide component details */
  /*
  .ui-draggable-handle .pagestructure,
  .ui-draggable-handle .placeholder{
    display: none;
  }
  */

  #canvas .ui-sortable .pagestructure,
  #canvas .ui-sortable .component{
    display: none;
  }




  #components .pagestructure,
  #components .placeholder{
    display: none;
  }
  #canvas .pagestructure,
  #canvas .component{
    display: none;
  }
  #pageStructure .placeholder,
  #pageStructure .component{
    display: none;
  }
  body.dragging, body.dragging * {
    cursor: move !important;
  }

  .dragged {
    position: absolute;
    opacity: 0.5;
    z-index: 2000;
  }

  ol.example li.placeholder {
    position: relative;
    /** More li styles **/
  }
  ol.example li.placeholder:before {
    position: absolute;
    /** Define arrowhead **/
  }



  #form {
      border:1px solid blue;
      padding:10px;
  }
  .builder-section {
      /*
      display:block;
      padding:10px;
      border:2px dashed green;
      margin-bottom:10px;
      */
  }
  .builder-elements {
      margin: 0;
      padding: 0;
  }
  .builder-element {
      /*
      background:#f5f5f5;
      border:1px solid #ccc;
      padding:5px;
      margin: 0 0 5px;
      */
  }
  .clone-section {
      display: none;
  }

.slds-drop-zone .slds-drop-zone__label{
  display: none;
}

.slds-drop-zone.slds-drop-zone_drag-off .slds-drop-zone__label{
  display: block;
}

#pageStructure .slds-drop-zone__label{
  display: none;
}

</style>

<script>
$('#canvas .slds-drop-zone_holder').hover(
//slds-drop-zone in front of all
   function(){
      $(this).addClass('slds-drop-zone_drag-off');
      $(this).addClass('slds-drop-zone')
    },
   function(){
     $(this).removeClass('slds-drop-zone_drag-off');
     $(this).removeClass('slds-drop-zone')
   }
)



</script>

  </body>
</html>


{#
<div class="slds-drop-zone">
  <div class="slds-drop-zone__container slds-is-hovered" tabindex="-1">
    <div class="slds-drop-zone__label slds-drop-zone__label_container">
      <div class="slds-media slds-media_center">
        <div class="slds-media__figure">
          <span class="slds-icon_container slds-icon-utility-connected_apps slds-current-color">
            <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">
              <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#connected_apps"></use>
            </svg>
          </span>
        </div>
        <div class="slds-media__body">
          <h2>
            <button class="slds-drop-zone__label_button slds-button_reset">
              <span class="slds-assistive-text">Edit: </span>
              <span>Component Name</span>
            </button>
          </h2>
        </div>
      </div>
    </div>
    <div class="demo-only demo-component" style="width:100%;height:10rem"></div>
    <div class="slds-drop-zone__actions">
      <div class="slds-button-group" role="group">
        <button class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" title="Move">
          <svg class="slds-button__icon" aria-hidden="true">
            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#move"></use>
          </svg>
          <span class="slds-assistive-text">Move</span>
        </button>
        <button class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" title="Close">
          <svg class="slds-button__icon" aria-hidden="true">
            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
          </svg>
          <span class="slds-assistive-text">Close</span>
        </button>
      </div>
    </div>
  </div>
</div>


#}





{#
  <div class="slds-drop-zone 2slds-drop-zone_drag-off">
    <div class="slds-drop-zone__label">
      <div class="slds-media slds-media_center">
        <div class="slds-media__figure">
          <span class="slds-icon_container slds-icon-utility-builder slds-current-color">
            <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true">
              <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#builder"></use>
            </svg>
          </span>
        </div>
        <div class="slds-media__body"><h2>Content</h2></div>
      </div>
    </div>
    <!-- region -->
    <!-- /region -->
  </div>
#}
