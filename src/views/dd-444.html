<!DOCTYPE html>
<html lang="en" class="list-view">

  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>.: Page Designer :.</title>
    <meta name="robots" content="noindex, nofollow"/>
    <link rel="icon" type="image/png" href="/favicon.png"/>
    <!-- Prototype styles -->
  </head>

  <body>
    <link rel="stylesheet" href="/styles/index.css"/>

    <ul id="tools" class="connected sortable listLeft">
       <li>ROW
         <ul class="connected sortable listSub">

         </ul>
       <li>Banner
       <li>RTF
    </ul>
    <ul id="listEditor" class="connected sortable listCenter">
    </ul>


    <ul id="listStructure" class="sortable listRight">
    </ul>





    <script src='/scripts/jquery-3.2.1.min.js'></script>
    <script src='/scripts/jquery-ui.min.js'></script>
    <script src='/scripts/utils.js'></script>
    <script src='/scripts/tether.min.js'></script>
    <script>
    var clone, before, parent
    $('.sortable').sortable({
        connectWith: '.sortable',
        helper: "clone",
        start: function (event, ui) {
            $(ui.item).show();
            clone = $(ui.item).clone();

            before = $(ui.item).prev();
            parent = $(ui.item).parent();
        },
        receive: function (event, ui) {
            //only when dropped from one to another!
            /*
            if (before.length) before.after(clone);
            else parent.prepend(clone);
            */
            parent.prepend(clone);
            document.querySelector('#listStructure').innerHTML = document.querySelector('#listEditor').innerHTML;
        }

    }).disableSelection();

    $('.listCenter').sortable({
      stop: function( event, ui ) {
        console.log('dropped in the center');
        document.querySelector('#listStructure').innerHTML = document.querySelector('#listEditor').innerHTML;
      }
    }).disableSelection();

    $('.listSub').sortable({
      stop: function( event, ui ) {
        console.log('dropped sub elements in the center');
        //document.querySelector('#listStructure').innerHTML = document.querySelector('#listEditor').innerHTML;
      }
    }).disableSelection();




    $('#listStructure').sortable({
      stop: function( event, ui ) {
        console.log('sorted at the right side');
        document.querySelector('#listEditor').innerHTML = document.querySelector('#listStructure').innerHTML;
      }
    }).disableSelection();



    </script>

    <style>

      .listLeft, .listCenter, .listRight{
        width: 200px;
        float: left;
        margin-right: 20px;
        border: 1px solid red;
      }

      #listEditor .component, #listEditor .structure{
        display: none;
      }
      #listTools .placeholder, #listTools .structure{
        display: none;
      }
      #page_structure .placeholder, #page_structure .component{
        display: none;
      }
      #listTools li:hover,
      .region li:hover,
      #page_structure li:hover{
        cursor: grab;
      }

      .sortable1{
        width: 300px;
        float: left;
      }

      .sortable2{
        width: 300px;
        float: left;
      }

      li{
        margin-left: 10px;
      }

      ul{
        margin-left: 20px;
        min-height: 20px;
        border: 1px solid blue;
      }
    </style>

  </body>




</html>
