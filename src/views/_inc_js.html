//DUMMY PAGE FUNCTIONALITY
var activeComponent = undefined;

var cloneCountA = 1;
var cloneCountB = 1;

var longtext = undefined;
var selected_image = undefined;
var selected_video = undefined;
var selected_text = undefined;
var selected_header = undefined;
var selected_sub_header = undefined;

var selected_product_name = undefined;
var selected_product_brand = undefined;
var selected_product_price = undefined;
var selected_product_id = undefined;

var seomax_a = 160;
var seomax_b = 70;


var $win = $(window); // or $box parent container
var $box = $('#component-selecta');
var $boxb = $('#language-selecta');
var $boxc = $('#device-selecta');
var $boxd = $('.sub-left').closest('.slds-dropdown-trigger');
var $boxe = $('.sub-right .slds-dropdown-trigger');

//var $box = $('.slds-dropdown-trigger');


//HIDE ALL MENUS
$(function(){
    $win.on('click.Bst', function(event){
        //MAIN COMPONENT SELECT
        if (
            $box.has(event.target).length == 0 //checks if descendants of $box was clicked
            &&
            !$box.is(event.target) //checks if the $box itself was clicked
            &&
            $($box).hasClass('slds-is-open')
        ){
            $($box).toggleClass('slds-is-open')
        }
        //LOCALIZATION SELECT
        if (
            $boxb.has(event.target).length == 0 //checks if descendants of $box was clicked
            &&
            !$boxb.is(event.target) //checks if the $box itself was clicked
            &&
            $($boxb).hasClass('slds-is-open')
        ){
            $($boxb).toggleClass('slds-is-open')
        }
        //DEVICE SELECT
        if (
            $boxc.has(event.target).length == 0 //checks if descendants of $box was clicked
            &&
            !$boxc.is(event.target) //checks if the $box itself was clicked
            &&
            $($boxc).hasClass('slds-is-open')
        ){
            $($boxc).toggleClass('slds-is-open')
        }
        //SUB LEFT SELECT
        if (
            $boxd.has(event.target).length == 0 //checks if descendants of $box was clicked
            &&
            !$boxd.is(event.target) //checks if the $box itself was clicked
            &&
            $($boxd).hasClass('slds-is-open')
        ){
            $($boxd).toggleClass('slds-is-open')
        }
        //SUB RIGHT SELECT
        if (
            $boxe.has(event.target).length == 0 //checks if descendants of $box was clicked
            &&
            !$boxe.is(event.target) //checks if the $box itself was clicked
            &&
            $($boxe).hasClass('slds-is-open')
        ){
            $($boxe).toggleClass('slds-is-open')
        }


    });

    return false;
});



//COUNT SEO CHARS

$('#spn-id-seo_description').html(seomax_a+'  Remaining');
$('#textarea-id-seo_description').keyup(function () {
    var lenght1 = $('#textarea-id-seo_description').val().length;
    var remaining = seomax_a - lenght1;
    $('#spn-id-seo_description').html(remaining + '  Remaining');
    if (remaining < 0) {
        $('#spn-id-seo_description').css('opacity', '0.4').css('color', 'red');
    }
    else {
        $('#spn-id-seo_description').css('opacity', '1').css('color', 'black');
    }
    if (remaining < 10) {
        $('#spn-id-seo_description').addClass('slds-destructive');
    }
    else {
        $('#spn-id-seo_description').removeClass('slds-destructive');
    }

});
$('#spn-id-seo_title').html(seomax_b+'  Remaining');
$('#input-seo_title').keyup(function () {
    var lenght2 = $('#input-seo_title').val().length;
    var remaining_b = seomax_b - lenght2;
    $('#spn-id-seo_title').html(remaining_b + '  Remaining');
    if (remaining_b < 0) {
        $('#spn-id-seo_title').css('opacity', '0.4').css('color', 'red');
    }
    else {
        $('#spn-id-seo_title').css('opacity', '1').css('color', 'black');
    }
    if (remaining_b < 10) {
        $('#spn-id-seo_title').css('color', 'red'); }
    else {
        $('#spn-id-seo_title').css('color', 'black');
    }

});








//BACK TO LIST
$('#back-to-list').click(function () {
    location.href = 'page-list.html';
});


//SCREEN SIZES
$('#trigger-phone').click(function () {
    $('.page-content').css('max-width', '320px');
    //$(this).elem.setAttribute('aria-hidden', 'true');
    $('#tools .slds-dropdown-trigger').toggleClass('slds-is-open');
});
$('#trigger-tablet').click(function () {
    $('.page-content').css('max-width', '800px');
    $('#tools .slds-dropdown-trigger').toggleClass('slds-is-open');
});
$('#trigger-desktop').click(function () {
    $('.page-content').css('max-width', '100%');
    $('#tools .slds-dropdown-trigger').toggleClass('slds-is-open');
});



//FILTER VIEW
$('#trigger_preview').click(function () {
    $('#poppinD').toggleClass('slds-hide');
});


$('.js-close-filter-view').click(function () {
    $('#poppinD').toggleClass('slds-hide');
});


//PREVIEW
$('#trigger-preview').click(function () {
    $('.slds-button--icon-more').toggleClass('slds-hide');
    $('.region').toggleClass('region region-off');
    $('#editor').toggleClass('editor-off');
    $('#trigger-back-to-edit').toggleClass('slds-hide');
    $('#trigger-preview').toggleClass('slds-hide');
    $('#tools').toggleClass('slds-hide');
    $('.mini-menu').toggleClass('slds-hide');
    $('.sub-mini-menu').toggleClass('slds-hide');
    $('.placeholder').toggleClass('placeholder placeholder-off');
    $('#trigger-publish').toggleClass('slds-hide');
    $('#sidebar-navigator').toggleClass('slds-hide');
});

$('#trigger-back-to-edit').click(function () {
    $('.slds-button--icon-more').toggleClass('slds-hide');
    $('.region-off').toggleClass('region-off region');
    $('.editor-off').toggleClass('editor-off editor');
    $('#trigger-back-to-edit').toggleClass('slds-hide');
    $('#trigger-preview').toggleClass('slds-hide');
    $('#tools').toggleClass('slds-hide');
    $('.mini-menu').toggleClass('slds-hide');
    $('.sub-mini-menu').toggleClass('slds-hide');
    $('.placeholder-off').toggleClass('placeholder-off placeholder');
    $('#trigger-publish').toggleClass('slds-hide');
    $('#sidebar-navigator').toggleClass('slds-hide');
});


//PUBLISH
$('#trigger-publish').click(function() {
    $('#modal-id-101').toggleClass('slds-hide');
});
$('#modal-id-101 #trigger-close').click(function() {
    $('#modal-id-101').toggleClass('slds-hide');
});
$('#modal-id-101 #trigger-cancel').click(function() {
    $('#modal-id-101').toggleClass('slds-hide');
});
$('#modal-id-101 #trigger-publish').click(function() {
    $('#modal-id-101').toggleClass('slds-hide');
    $('#toast-page-published').toggleClass('slds-hide');
    $('#trigger-publish').toggleClass('slds-hide');
    $('#trigger-preview').toggleClass('slds-hide');
    $('#trigger-published').toggleClass('slds-hide');
    $('#not_published').toggleClass('slds-hide');
    $('#page_published').toggleClass('slds-hide');
});
$('#toast-page-published .close-toast-2').click(function() {
    $('#toast-page-published').toggleClass('slds-hide');
});




//TRIGGER DELETE PAGE
$('.js-open-modal-id-1').click(function () {
    $('.modal-id-1').toggleClass('slds-hide');
    $('.slds-dropdown-trigger').removeClass('slds-is-open');
    $('.slds-dropdown-trigger').addClass('slds-is-closed');
});

//DELETE PAGE MODAL
$('.modal-id-1 button.js-close-modal-id-1').click(function () {
    $('.modal-id-1').toggleClass('slds-hide');
    $('#toast-id-1').toggleClass('slds-hide');
});

//CLOSE DELETE TOAST
$('#js-close-toast-id-1').click(function () {
    $('#toast-id-1').toggleClass('slds-hide');
});

//TRIGGER NEW PAGE
$('#js-open-modal-id-2').click(function () {
    $('.modal-id-2').toggleClass('slds-hide');
});

//NEW PAGE MODAL
$('.js-close-modal-id-2').click(function () {
    $('.modal-id-2').toggleClass('slds-hide');
});
$('.js-close-modal-id-100').click(function () {
    $('.modal-id-100').toggleClass('slds-hide');
});
$('#js-open-modal-100').click(function () {
    $('.modal-id-100').toggleClass('slds-hide');
});

//SIDEBAR
$('#button-page-navigator').click(function () {
    $('#sidebar-navigator').toggleClass('slds-hide');
});
$('#button-close-navigator').click(function () {
    $('#modal-page-navigator').toggleClass('slds-hide');
});
$('#button-preview-settings').click(function () {
    $('#modal-id-102').toggleClass('slds-hide');
});

$('#button-close-navigator').click(function () {
    $('#sidebar-navigator').toggleClass('slds-hide');
});



//MODAL PREVIEW SETTINGS
$('#modal-id-102 .js-close-modal-id-102').click(function () {
    $('#modal-id-102').toggleClass('slds-hide');
});

//REGION A
    //TEXT
    $('#regionA .js-trigger-modal-id-4').click(function () {
        $('.modal-id-4').toggleClass('slds-hide');
        $('#regionA .slds-dropdown-trigger:first').toggleClass('slds-is-open');
    });
    $('#regionA .js-save-modal-id-4').click(function () {
        $('#regionA .modal-id-4').toggleClass('slds-hide');
        $('#regionA .placeholder-component-4').appendTo('#regionA .placeholder-container');
        $('.dummy-component-4').clone(true,true).appendTo('#navigator-container');
        //$('.dummy-component-4').toggleClass('slds-hide');
    });
    $('.placeholder-component-4 .js-trigger-edit-component').click(function () {
        $('#regionA .modal-id-4').toggleClass('slds-hide');
    })
    $('#regionA .js-close-modal-id-4').click(function () {
        $('#regionA .modal-id-4').toggleClass('slds-hide');
    });
    $('#regionA .placeholder-component-4 .js-trigger-delete-component').click(function () {
        $('#regionA #modal-id-4-delete').toggleClass('slds-hide');
    })

    $('#modal-id-4-delete button.js-close-modal-id-4-delete').click(function () {
        $('#regionA #modal-id-4-delete').toggleClass('slds-hide');
    })

    $('#modal-id-4-delete button.action-delete-component').click(function () {
        $('#regionA #modal-id-4-delete').toggleClass('slds-hide');
        $('#regionA .placeholder-container .placeholder-component-4').clone(true,true).appendTo('#regionA .placeholder-library');
    })


    //BANNER
    $('#regionA .js-trigger-modal-id-5').click(function () {
        $('.modal-id-5').toggleClass('slds-hide');
        $('#regionA .slds-dropdown-trigger:first').toggleClass('slds-is-open');
    });
    $('#regionA .js-save-modal-id-5').click(function () {
        $('#regionA .modal-id-5').toggleClass('slds-hide');
        $('#regionA .placeholder-component-5').appendTo('#regionA .placeholder-container');
    });
    $('.placeholder-component-5 .js-trigger-edit-component').click(function () {
        $('#regionA .modal-id-5').toggleClass('slds-hide');
    })
    $('#regionA .js-close-modal-id-5').click(function () {
        $('#regionA .modal-id-5').toggleClass('slds-hide');
    });
    $('#regionA .placeholder-component-5 .js-trigger-delete-component').click(function () {
        $('#regionA #modal-id-5-delete').toggleClass('slds-hide');
    })

    $('#modal-id-5-delete button.js-close-modal-id-5-delete').click(function () {
        $('#regionA #modal-id-5-delete').toggleClass('slds-hide');
    })

    $('#modal-id-5-delete button.action-delete-component').click(function () {
        $('#regionA #modal-id-5-delete').toggleClass('slds-hide');
        $('#regionA .placeholder-container .placeholder-component-5').appendTo('#regionA .placeholder-library');
    })


    //CATEGORY TILES
    $('#regionA .js-trigger-modal-id-6').click(function () {
        $('.modal-id-6').toggleClass('slds-hide');
        $('#regionA .slds-dropdown-trigger:first').toggleClass('slds-is-open');
    });
    $('#regionA .js-save-modal-id-6').click(function () {
        $('#regionA .modal-id-6').toggleClass('slds-hide');
        $('#regionA .placeholder-component-6').appendTo('#regionA .placeholder-container');
    });
    $('.placeholder-component-6 .js-trigger-edit-component').click(function () {
        $('#regionA .modal-id-6').toggleClass('slds-hide');
    })
    $('#regionA .js-close-modal-id-6').click(function () {
        $('#regionA .modal-id-6').toggleClass('slds-hide');
    });
    $('#regionA .placeholder-component-6 .js-trigger-delete-component').click(function () {
        $('#regionA #modal-id-6-delete').toggleClass('slds-hide');
    })

    $('#modal-id-6-delete button.js-close-modal-id-6-delete').click(function () {
        $('#regionA #modal-id-6-delete').toggleClass('slds-hide');
    })

    $('#modal-id-6-delete button.action-delete-component').click(function () {
        $('#regionA #modal-id-6-delete').toggleClass('slds-hide');
        $('#regionA .placeholder-container .placeholder-component-6').appendTo('#regionA .placeholder-library');
    })


    //USP
    $('#regionA .js-trigger-modal-id-7').click(function () {
        $('.modal-id-7').toggleClass('slds-hide');
        $('#regionA .slds-dropdown-trigger:first').toggleClass('slds-is-open');
    });
    $('#regionA .js-save-modal-id-7').click(function () {
        $('#regionA .modal-id-7').toggleClass('slds-hide');
        $('#regionA .placeholder-component-7').appendTo('#regionA .placeholder-container');
    });
    $('.placeholder-component-7 .js-trigger-edit-component').click(function () {
        $('#regionA .modal-id-7').toggleClass('slds-hide');
    })
    $('#regionA .js-close-modal-id-7').click(function () {
        $('#regionA .modal-id-7').toggleClass('slds-hide');
    });
    $('#regionA .placeholder-component-7 .js-trigger-delete-component').click(function () {
        $('#regionA #modal-id-7-delete').toggleClass('slds-hide');
    })

    $('#modal-id-7-delete button.js-close-modal-id-7-delete').click(function () {
        $('#regionA #modal-id-7-delete').toggleClass('slds-hide');
    })

    $('#modal-id-7-delete button.action-delete-component').click(function () {
        $('#regionA #modal-id-7-delete').toggleClass('slds-hide');
        $('#regionA .placeholder-container .placeholder-component-7').appendTo('#regionA .placeholder-library');
    })


    //Targeted Banner
    $('#regionA .js-trigger-modal-id-8').click(function () {
        $('.modal-id-8').toggleClass('slds-hide');
        $('#regionA .slds-dropdown-trigger:first').toggleClass('slds-is-open');
    });
    $('#regionA .js-save-modal-id-8').click(function () {
        $('#regionA .modal-id-8').toggleClass('slds-hide');
        $('#regionA .placeholder-component-8').appendTo('#regionA .placeholder-container');
    });
    $('.placeholder-component-8 .js-trigger-edit-component').click(function () {
        $('#regionA .modal-id-8').toggleClass('slds-hide');
    })
    $('#regionA .js-close-modal-id-8').click(function () {
        $('#regionA .modal-id-8').toggleClass('slds-hide');
    });
    $('#regionA .placeholder-component-8 .js-trigger-delete-component').click(function () {
        $('#regionA #modal-id-8-delete').toggleClass('slds-hide');
    })

    $('#modal-id-8-delete button.js-close-modal-id-8-delete').click(function () {
        $('#regionA #modal-id-8-delete').toggleClass('slds-hide');
    })

    $('#modal-id-8-delete button.action-delete-component').click(function () {
        $('#regionA #modal-id-8-delete').toggleClass('slds-hide');
        $('#regionA .placeholder-container .placeholder-component-8').appendTo('#regionA .placeholder-library');
    })



    //Carousel/Slider
    $('#regionA .js-trigger-modal-id-9').click(function () {
        $('.modal-id-9').toggleClass('slds-hide');
        $('#regionA .slds-dropdown-trigger:first').toggleClass('slds-is-open');
    });
    $('#regionA .js-save-modal-id-9').click(function () {
        $('#regionA .modal-id-9').toggleClass('slds-hide');
        $('#regionA .placeholder-component-9').appendTo('#regionA .placeholder-container');
    });
    $('.placeholder-component-9 .js-trigger-edit-component').click(function () {
        $('#regionA .modal-id-9').toggleClass('slds-hide');
    })
    $('#regionA .js-close-modal-id-9').click(function () {
        $('#regionA .modal-id-9').toggleClass('slds-hide');
    });
    $('#regionA .placeholder-component-9 .js-trigger-delete-component').click(function () {
        $('#regionA #modal-id-9-delete').toggleClass('slds-hide');
    })

    $('#modal-id-9-delete button.js-close-modal-id-9-delete').click(function () {
        $('#regionA #modal-id-9-delete').toggleClass('slds-hide');
    })

    $('#modal-id-9-delete button.action-delete-component').click(function () {
        $('#regionA #modal-id-9-delete').toggleClass('slds-hide');
        $('#regionA .placeholder-container .placeholder-component-9').appendTo('#regionA .placeholder-library');
    })



//Category Tiles
$('.js-trigger-modal-id-12').click(function () {
    $('.modal-id-12').toggleClass('slds-hide');
    $('#sub-left .slds-dropdown-trigger:first').toggleClass('slds-is-open');
});

$('.js-save-modal-id-12').click(function () {
    $('.modal-id-12').toggleClass('slds-hide');
    $('#sub-left .placeholder-component-12').appendTo('#sub-left .placeholder-container');
    //now show images in placeholder
    $('#sub-left #left-placeholder').toggleClass('slds-hide');
    $('#sub-right #right-placeholder').toggleClass('slds-hide');

});
$('.js-close-modal-id-12').click(function () {
    $('.modal-id-12').toggleClass('slds-hide');
});



//TEXT COMPONENT
$('.add-text-dummy').click(function(){
    var component_text = $('#dummy_container .my_text_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_text_navigator li').clone(true,true).addClass('item'+ cloneCountB++);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    //now open editor
    activeComponent = undefined;
    activeComponent = $(component_text).attr('class');
    class_activeComponent = '.' +activeComponent;
    $('.text-component-editor').toggleClass('slds-hide');

    return false;
});


$('.text-component button.js-trigger-edit-component').click(function(){
    //$(this).closest('li').find('.delete-component').toggleClass('slds-hide');
    //$(this).closest('#region').find('li').attr('class');
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');

    $('.text-component-editor').toggleClass('slds-hide');
    return false;
});


$('.text-component-editor button.trigger-save-modal').click(function(){
    selected_text = $('.slds-rich-text-area__content').html();
    selected_header = $('.slds-input-header').val();

    $(class_activeComponent +' .text-holder').html(selected_text);
    $(class_activeComponent +' .header-holder').html(selected_header);

    $('.text-component-editor').toggleClass('slds-hide');


    return false;
});




//IMAGE COMPONENT
$('.add-image-dummy').click(function(){
    var component_text = $('#dummy_container .my_image_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_image_navigator li').clone(true,true).addClass('item'+ cloneCountB++);


    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);


    //now open editor
    activeComponent = undefined;
    activeComponent = $(component_text).attr('class');

    class_activeComponent = '.' +activeComponent;
    $('.image-component-editor').toggleClass('slds-hide');


    return false;
});
$('.image-component button.js-trigger-edit-component').click(function(){
    //$(this).closest('li').find('.delete-component').toggleClass('slds-hide');
    //$(this).closest('#region').find('li').attr('class');
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    class_activeComponent = '.' +activeComponent;

    $('.image-component-editor').toggleClass('slds-hide');
    return false;
});
$('.image-component-editor button.trigger-save-modal').click(function(){
    $('.image-component-editor').toggleClass('slds-hide');
    $(class_activeComponent +' .image-holder').attr('src', '/assets/' +selected_image);

    /*
    selected_image_text ='';
    selected_image_header ='';

    selected_image_text = $('.slds-rich-text-area__content').html();
    selected_image_header = $('.slds-input-header').val();

    $(class_activeComponent +' .image-text-holder').html(selected_image_text);
    $(class_activeComponent +' .image-header-holder').html(selected_image_header);
    */

    return false;
});



//TARGETED_BANNER COMPONENT

$('.add-targeted_banner-dummy').click(function(){
    var component_text = $('#dummy_container .my_targeted_banner_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_targeted_banner_navigator li').clone(true,true).addClass('item'+ cloneCountB++);


    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    return false;
});
$('.target-component button.js-trigger-edit-component').click(function(){
    //$(this).closest('li').find('.delete-component').toggleClass('slds-hide');
    //$(this).closest('#region').find('li').attr('class');
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    class_activeComponent = '.' +activeComponent;
    $('.targeted_banner-component-editor').toggleClass('slds-hide');
    return false;
});
$('.targeted_banner-component-editor button.trigger-save-modal').click(function(){
    $('.targeted_banner-component-editor').toggleClass('slds-hide');
    $(class_activeComponent +' .image-holder').attr('src', '/assets/' +selected_image);
    return false;
});









//VIDEO COMPONENT
$('.add-video-dummy').click(function(){
    var component_text = $('#dummy_container .my_video_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_video_navigator li').clone(true,true).addClass('item'+ cloneCountB++);


    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    return false;
});
$('.video-component button.js-trigger-edit-component').click(function(){
    //$(this).closest('li').find('.delete-component').toggleClass('slds-hide');
    //$(this).closest('#region').find('li').attr('class');
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    class_activeComponent = '.' +activeComponent;
    $('.video-component-editor').toggleClass('slds-hide');
    return false;
});
$('.video-component-editor button.trigger-save-modal').click(function(){
    $('.video-component-editor').toggleClass('slds-hide');
    $(class_activeComponent +' .video-holder').attr('src', '/assets/' +selected_video);
    return false;
});








//SLIDER COMPONENT
$('.add-slider-dummy').click(function(){
    var component_text = $('#dummy_container .my_slider_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_slider_navigator li').clone(true,true).addClass('item'+ cloneCountB++);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    return false;
});
$('.slider-component button.js-trigger-edit-component').click(function(){
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    $('.slider-component-editor').toggleClass('slds-hide');
    return false;
});



//USP COMPONENT
$('.add-usp-dummy').click(function(){
    var component_text = $('#dummy_container .my_usp_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_usp_navigator li').clone(true,true).addClass('item'+ cloneCountB++);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    return false;
});
$('.usp-component button.js-trigger-edit-component').click(function(){
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    $('.usp-component-editor').toggleClass('slds-hide');
    return false;
});




//PRODUCT SELECT COMPONENT
$('.add-product-dummy').click(function(){
    var component_text = $('#dummy_container .my_product_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_product_navigator li').clone(true,true).addClass('item'+ cloneCountB++);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    //now open editor
    activeComponent = undefined;
    activeComponent = $(component_text).attr('class');
    class_activeComponent = '.' +activeComponent;

    $('.product-component-editor').toggleClass('slds-hide');

    return false;
});
$('.product-component-placeholder button.js-trigger-edit-component').click(function(){
    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    $('.product-component-editor').toggleClass('slds-hide');
    return false;
});
$('.product-component-editor button.trigger-save-modal').click(function(){
    $('.product-component-editor').toggleClass('slds-hide');
    return false;
});

$('.product-component-editor .trigger-close-modal').click(function(){
    $('.product-component-editor').toggleClass('slds-hide');
    return false;
});





//2COL COMPONENT
$('.add-2col-dummy').click(function(){
    var component_text = $('#dummy_container>ul.my_2col_dummy>li').clone(true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_2col_navigator li').clone(true,true).addClass('item'+ cloneCountB++);


    //navigator_text.('.title').text('navigator'+cloneCountB);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    component_text.appendTo('#region').hide().fadeIn(600);
    navigator_text.appendTo('#navigator').hide().fadeIn(600);

    return false;
});



//2COL COMPONENT - OPEN CLOSE MENU


$('.sub-container .slds-dropdown-trigger--click').click(function(){
    $(this).toggleClass('slds-is-open');
});



//SUB TEXT COMPONENT
$('.add-sub-text-dummy').click(function(){
    var component_text = $('#dummy_container .my_text_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_text_navigator li').clone(true,true).addClass('item'+ cloneCountB++);
    //$(this).closest('.sub').append(component_text);
    //$(this).closest('.sub').css('background-color', 'yellow');
    //component_text.appendTo('.sub').hide().fadeIn(600);

    //$(this).closest('.sub-container').find('.sub').css('background', 'red');
    var subgoal = $(this).closest('.sub-container').find('.sub')
    component_text.appendTo(subgoal).hide().fadeIn(600);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    return false;
});




//SUB IMAGE COMPONENT
$('.add-sub-image-dummy').click(function(){
    var component_text = $('#dummy_container .my_image_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_image_navigator li').clone(true,true).addClass('item'+ cloneCountB++);
    var subgoal = $(this).closest('.sub-container').find('.sub')
    component_text.appendTo(subgoal).hide().fadeIn(600);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    return false;
});


//SUB VIDEO COMPONENT
$('.add-sub-video-dummy').click(function(){
    var component_text = $('#dummy_container .my_video_dummy li').clone(true,true).addClass('item'+ cloneCountA++);
    var navigator_text = $('#dummy_container .my_video_navigator li').clone(true,true).addClass('item'+ cloneCountB++);
    var subgoal = $(this).closest('.sub-container').find('.sub')
    component_text.appendTo(subgoal).hide().fadeIn(600);

    $(this).closest('.button-container>.slds-dropdown-trigger').toggleClass('slds-is-open');

    return false;
});





//DELETE COMPONENT
$('button.js-trigger-delete-component').click(function(){
    //$(this).closest('li').find('.delete-component').toggleClass('slds-hide');
    //$(this).closest('#region').find('li').attr('class');

    activeComponent = undefined;
    activeComponent = $(this).closest('li').attr('class');
    $('.delete-component').toggleClass('slds-hide');

    return false;
});



$('.delete-component .action-delete-component').click(function(){
    /*
        var removeit = $(this).closest('li').attr('class');

        $(this).closest('li').find('.delete-component').toggleClass('slds-hide');
        $('li.'+ removeit).fadeOut(600, function(){
            $('li.'+ removeit).remove();
        });
    */

    $('.delete-component').toggleClass('slds-hide');
    $('li.'+ activeComponent).fadeOut(600, function(){
        $('li.'+ activeComponent).remove();
    });
    return false;
});




//sort at the same time navigator and component
var currentIndex;
$(function() {
    $( '.list' ).sortable({
        start: function(event, ui) {
            currentIndex = ui.helper.index();
        },
        change: function( event, ui ) {
            var indexCount = ui.item.parent().find('li:not(.ui-sortable-helper)');
            var sortClass = '.'+ui.item.attr('class').split(' ')[0];
            var parent = $('.list').not(ui.item.parent());

            if(currentIndex > ui.placeholder.index()){
                parent.find('li').eq(indexCount.index(ui.placeholder)).before(parent.find(sortClass));
            }
            else
                parent.find('li').eq(indexCount.index(ui.placeholder)).after(parent.find(sortClass));
                currentIndex = ui.placeholder.index();
        }
    });
    $( '.list' ).disableSelection();
});


//delete component and navigator item all together
$('.delete-component .js-close-modal-id-0').click(function(){
    //$(this).closest('li').find('.delete-component').toggleClass('slds-hide');
    $('.delete-component').toggleClass('slds-hide');

    return false;
});


//MODAL HANDLERS
$('.trigger-close-modal').click(function(){
    $(this).closest('.editor').toggleClass('slds-hide');

    return false;
});


 //SLIDER
 $('.trigger-sliderA').click(function() {
     $('.sliderA').addClass('slds-show');
     $('.sliderA').removeClass('slds-hide');
     $('.sliderB').addClass('slds-hide');
     $('.sliderB').removeClass('slds-show');
     $('.sliderC').addClass('slds-hide');
     $('.sliderC').removeClass('slds-show');

     $('.sliderA').addClass('active');

     return false;
 });
 $('.trigger-sliderB').click(function() {
     $('.sliderA').addClass('slds-hide');
     $('.sliderA').removeClass('slds-show');
     $('.sliderB').addClass('slds-show');
     $('.sliderB').removeClass('slds-hide');
     $('.sliderC').addClass('slds-hide');
     $('.sliderC').removeClass('slds-show');

     $('.sliderB').addClass('active');

     return false;
 });
 $('.trigger-sliderC').click(function() {
     $('.sliderA').addClass('slds-hide');
     $('.sliderA').removeClass('slds-show');
     $('.sliderB').addClass('slds-hide');
     $('.sliderB').removeClass('slds-show');
     $('.sliderC').addClass('slds-show');
     $('.sliderC').removeClass('slds-hide');

     $('.sliderC').addClass('active');

     return false;
 });

 //IMAGE SELECT
 $('.image-thumb').click(function() {
     selected_image = $(this).find('h2').text();
     //var selected_image = document.getElementsByClassName('this_selected_item').src;
     return false;
 });

//VIDEO SELECT
 $('.video-thumb').click(function() {
     selected_video = $(this).find('h2').text();
     return false;
 });


 //HOVER LI ITEM
 $('.list>li').hover(function() {
     var myClass = $(this).attr('class');
     $('.' + myClass).css({
         border : '3px solid red',
         color : 'red'
     });
 });


//FILTER PRODUCT TABLE
$("#kwd_search").keyup(function(){
    if( $(this).val() != ""){
        $("#my-table tbody>tr").hide();
        $("#my-table td:contains-ci('" + $(this).val() + "')").parent("tr").show();
    }else{
        $("#my-table tbody>tr").show();
    }
});
$.extend($.expr[":"],{
    "contains-ci": function(elem, i, match, array){
        return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
    }
});

//SELECT PRODUCT
$('.slds-checkbox_faux').click(function() {
    var selected_product_name = undefined;
    var selected_product_brand = undefined;
    var selected_product_price = undefined;
    var selected_product_id = undefined;


    selected_product_name=      $(this).closest('tr').find('.product-name').html();
    selected_product_brand =    $(this).closest('tr').find('.product-brand').html();
    selected_product_price =    $(this).closest('tr').find('.product-price').html();

    //return false;

    $('.product-recommendation').toggleClass('slds-hide');
});


//SELECT RECOMMENDATION
$('#visual-picker-7').click(function() {
    $('.product-holder2').toggleClass('slds-hide');
    return false;
});
